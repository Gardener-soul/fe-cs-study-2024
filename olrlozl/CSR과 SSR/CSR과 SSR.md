> [[10분 테코톡] 신세한탄의 CSR&SSR](https://www.youtube.com/watch?v=YuqB8D6eCKE) 를 바탕으로 정리한 글입니다.

## 🟦 SPA와 MPA

### 🔶 SPA

- Single Page Application의 약자
- 하나의 페이지로 구성된 웹 애플리케이션
- SPA로 개발된 웹사이트에서는 각 메뉴를 선택하면 보통 헤더는 고정되어 있는 상태로 메인화면 혹은 클릭한 부분만 바뀐다.
- 오늘날 웹 애플리케이션을 개발은 대부분 React, Vue, Angular와 같은 자바스크립트 기반 프레임워크를 사용해 SPA를 개발한다.

### 🔶 MPA

- Multi Page Application의 약자
- 탭을 이동할 때마다 서버로부터 새로운 HTML을 새로 받아와서 페이지 전체를 새로 렌더링 하는 전통적인 웹 페이지 구성 방식이다.
- **단점**
    - 매번 새로운 HTML을 서버로부터 받아온다
    - 전환 시마다 화면이 깜빡인다
- 이와 같은 단점들 때문에, AJAX가 등장하면서부터는 원하는 부분만 클라이언트에서 동적으로 갈아끼울 수 있고 화면 깜빡임도 없는 SPA를 사용하게 되었다.

## 🟦 CSR와 SSR

### 🔶 CSR

- Client Side Rendering의 약자
- 클라이언트 측에서 렌더링 하는 방식

### 🔶 SSR

- Server Side Rendering의 약자
- 서버 측에서 렌더링 하는 방식

### 🔶 SPA와 CSR의 관계

- SPA는 웹 애플리케이션에 필요한 정적 리소스를 초반 한 번에 모두 다운로드하고, 이후 새로운 페이지 요청이 있을 때, 페이지 갱신에 필요한 데이터만 전달받아서 클라이언트에서 필요한 페이지를 갱신하기 때문에 렌더링 방식으로 CSR을 사용한다.
- React, Vue, Angular를 사용해서 SPA를 만들고, 특별한 목적을 가지고 렌더링 방식을 변경하지 않는다면 자연스럽게 CSR을 사용한다.

### 🔶 MPA와 SSR의 관계

- MPA는 새로운 요청이 있을 때마다 서버에서 이미 렌더링 된 정적 리소스를 받아오기 때문에 렌더링 방식으로 SSR를 사용한다.
- PHP나 JSP로 MPA를 만들면 자연스럽게 SSR을 사용한다.

### 🔶 정리

- 일반적으로 SPA에서는 CSR로 렌더링하고, MPA에서는 SSR로 렌더링 한다.
- 페이지 개수에 따라 SPA와 MPA로 구분하고, 렌더링하는 위치에 따라 CSR과 SSR로 구분한다.

## 🟦 SSR과 SSG

### 🔶 SSG

- Static Site Generation의 약자
- Static Rendering 이라고도 불리는 방식
- 서버에서 HTML을 보내준다는 측면에서는 SSR과 비슷하지만, '언제' 만들어주는지에 따라 차이가 있다.

### 🔶 SSR과 SSG 차이점

| SSR | SSG |
| --- | --- |
| 요청 시 서버에서 즉시 HTML을 만들어 응답한다. | 페이지들을 서버에 모두 만들어 둔 후에 요청 시 해당 페이지를 응답한다. |
| 데이터가 달라지거나 자주 바뀌어서 미리 만들어 두기 어려운 페이지에 적합하다. | 바뀔 일이 거의 없어서 캐싱해 두면 좋은 페이지에 사용하면 적합하다. |

## 🟦 CSR와 SSR의 동작 과정과 특징

### 🔶 CSR의 동작 과정

1. 유저가 **웹사이트에 방문**한다.
2. 브라우저가 서버에 **콘텐츠를 요청**한다.
3. 서버는 **빈 뼈대만 있는 HTML**을 **연결된 JS 링크**와 함께 응답으로 보내준다.
4. 브라우저가, 연결된 JS 링크를 통해 서버로부터 다시 **JS 파일을 다운로드** 받아서, JS를 이용해 동적으로 페이지를 만들어서 브라우저에 띄워준다.

### 🔶 CSR의 특징

- CSR은 브라우저가 JS 파일을 다운로드하고, 동적으로 DOM을 생성하는 시간을 기다려야 하기 때문에 초기 로딩 속도가 느리다.
- 하지만 초기 로딩 이후에 페이지 일부를 변경할 때는 서버에서 해당 데이터만 요청하면 되기 때문에 이후 구동 속도는 빠르다는 특징이 있다.
- 서버는 빈 뼈대만 있는 HTML을 넘겨주는 역할만 수행하면 되기 때문에 서버 측의 부하가 적다.
- 클라이언트 측에서 연산, 라우팅 등을 모두 직접 처리하기 때문에 반응속도가 빠르고 UX도 우수하다는 장점이 있다.
- 한편, 브라우저들이 가지는 웹 크롤러는 HTML을 읽어서 검색 가능한 색인을 만들어 내는데, 웹 크롤러 봇 입장에서는 HTML이 텅텅 비어 있는 것처럼 보여서, 검색엔진이 색인을 할 만한 콘텐츠가 존재하지 않는다. 이 때문에, SEO(검색엔진 최적화)에 불리하다는 치명적인 단점이 있다.
- 물론 구글의 크롤러 봇은 자바스크립트를 실행할 줄 알기 때문에, CSR 웹 크롤링도 가능하다고 하지만 아직 완벽한 단계가 아니다. 그래서 구글 측에서도 여전히 크롤러 봇이 JS를 실행하기 전에 더욱 빠르게 크롤링을 할 수 있도록 하기 위해서, 그리고 JS를 실행할 수 없는 다른 크롤러 봇들을 위해서, SSR을 고려하라는 말을 덧붙이고 있다고 한다.

### 🔶 **SSR의 동작 과정**

1. 유저가 **웹사이트에 방문**한다.
2. 브라우저에서 서버로 **콘텐츠를 요청**한다.
3. 서버에서는 즉시 페이지에 필요한 데이터를 얻어와 모두 삽입하고, CSS까지 모두 적용해서 **렌더링 준비를 마친 HTML과 JS코드**를 브라우저에 응답으로 전달한다.
4. 브라우저에서는 전달받은 **HTML을 바로 렌더링**한다. 이어, 브라우저가 **JS코드를 다운로드**하고, **HTML에 JS로직을 연결**한다.

### 🔶 **SSR의 특징**

- 모든 데이터가 이미 HTML에 담긴 채로 브라우저에 전달되기 때문에 SEO(검색엔진 최적화)에 유리하다. JS를 실행하지 못하는 크롤러 봇도 무리없이 HTML을 읽을 수 있기 때문이다.
- JS 코드를 다운로드 받고, 실행하기 전에 사용자가 HTML이 렌더링 된 **화면을 볼 수 있다. JS 다운로드를 기다려야 했던 CSR 보다 초기 구동 속도가 빠를 수밖에 없다.
- 하지만 동시에 이것이 치명적인 단점이 되기도 한다. 해당 시점에서는 사용자가 버튼을 클릭하거나 이동하려고 할 때 아무 반응이 없을 수 있다. 인터렉션이 가능한 페이지처럼 보이지만 실제로는 내용과 스타일이 입혀진 껍데기에 불과하고, 실제로는 클라이언트 측 JS가 실행되고 이벤트 핸들러가 첨부되어서 JS 로직이 모두 연결될 때까지 사용자의 입력에 응답할 수 없기 때문이다.
- SSR 안에는 TTV(Time to View)와 TTI(Time to Interact) 간의 시간 간격이 존재한다는 것이 단점이다. 반면에 CSR은 JS가 동적으로 DOM을 생성하기 때문에 HTML은 JS 로직이 모두 완전히 연결된 상태라 사용자가 보는 시점과 이용할 수 있는 시점이 동일하다.

### 🔶 CSR과 SSR의 장단점 정리

|  | CSR | SSR |
| --- | --- | --- |
| **장점** | - 화면 깜빡임이 없음<br>- 초기 로딩 이후 구동 속도가 빠름<br>- TTV와 TTI 사이 간극이 없음<br>- 서버 부하 분산 | - 초기 구동 속도가 빠름<br>- SEO에 유리함 |
| **단점** | - 초기 로딩 속도가 느림<br>- SEO에 불리함 | - 화면 깜빡임이 있음<br>- TTV와 TTI 사이 간극이 있음<br>- 서버 부하가 있음 |

## 🟦 서비스 성격에 따른 선택 기준

### 🔶 **CSR**

- 유저와 상호작용이 많다
- 대부분이 고객의 개인정보로 이루어진 페이지들이라 검색엔진에 노출될 필요는 없다

### 🔶 **SSR**

- 회사 홈페이지라 상위노출이 필요하다
- 누구에게나 항상 같은 내용을 보여준다
- 업데이트가 빈번해 해당 페이지 데이터가 자주 바뀐다

### 🔶 **SSG**

- 회사 홈페이지라 상위노출이 필요하다
- 누구에게나 항상 같은 내용을 보여준다
- 업데이트를 거의 하지 않는다

### 🔶 **Universal Rendering** (초기 렌더링으로는 SSR + 이후 CSR)

- 사용자에 따라 페이지 내용이 달라진다
- 빠른 인터렉션이 중요하고, 화면 깜빡임이 없어야 한다
- SEO를 포기할 수 없어 상위노출이 되면 좋겠다
